<!-- Wrapper يغيّر الاتجاه حسب اللغة -->
<div class="row" [attr.dir]="currentLang === 'ar' ? 'rtl' : 'ltr'">



  <div class="container-fluid py-4 add-shipment-page">
    <div class="mb-4">
      <h4 class="fw-bold">{{ currentLang === 'ar' ? 'إضافة شحنة' : 'Add Shipment' }}</h4>
    </div>

    <div class="card shadow-sm border-0 rounded-4 p-4 animate__animated animate__fadeInUp">
      <form #shipmentForm="ngForm" (ngSubmit)="addShipment(shipmentForm)" novalidate>
        <div class="row g-3">

          <!-- Shipment Number -->
          <div class="col-md-6">
            <label class="form-label fw-medium">
              {{ currentLang === 'ar' ? 'رقم الشحنة' : 'Shipment Number' }}
            </label>
            <input
              type="text"
              class="form-control"
              name="shipment_number"
              [(ngModel)]="newShipment.shipment_number"
              [placeholder]="currentLang === 'ar' ? 'أدخل رقم الشحنة' : 'Enter shipment number'"
              required />
          </div>

          <!-- Shipment Type -->
          <div class="col-md-6">
            <label class="form-label fw-medium">
              {{ currentLang === 'ar' ? 'نوع الشحنة' : 'Shipment Type' }}
            </label>
            <select
              class="form-select"
              name="shipment_type"
              [(ngModel)]="newShipment.shipment_type"
              required>
              <option value="" disabled>
                {{ currentLang === 'ar' ? 'اختر النوع' : 'Select type' }}
              </option>
              <option value="sea">{{ currentLang === 'ar' ? 'بحري' : 'Sea' }}</option>
              <option value="air">{{ currentLang === 'ar' ? 'جوي' : 'Air' }}</option>
            </select>
          </div>

          <!-- Shipment Status -->
          <!-- Shipment Status -->
<div class="col-md-6">
  <label class="form-label fw-medium">
    {{ currentLang === 'ar' ? 'حالة الشحنة' : 'Shipment Status' }}
  </label>
  <select
    class="form-select"
    name="shipment_status"
    [(ngModel)]="newShipment.shipment_status"
    required>
    <option value="" disabled>
      {{ currentLang === 'ar' ? 'اختر الحالة' : 'Select status' }}
    </option>
    <option *ngFor="let s of statusOptions" [value]="s.key">
      {{ getStatusLabel(s.key, newShipment) }}
    </option>
  </select>
</div>

          <!-- Expected Arrival -->
          <div class="col-md-6">
            <label class="form-label fw-medium">
              {{ currentLang === 'ar' ? 'تاريخ الوصول المتوقع' : 'Expected Arrival Date' }}
            </label>
            <input
              type="date"
              class="form-control"
              name="expected_arrival_date"
              [(ngModel)]="newShipment.expected_arrival_date" />
          </div>

          <!-- Fields visible only for SEA -->
          <div  class="col-md-6">
            <label class="form-label fw-medium">
              {{ currentLang === 'ar' ? 'إجمالي الكراتين' : 'Total Cartons' }}
            </label>
            <input
              type="number"
              class="form-control"
              name="total_cartons"
              [(ngModel)]="newShipment.total_cartons"
              [placeholder]="currentLang === 'ar' ? '0' : '0'"
              min="0" />
          </div>

          <div *ngIf="newShipment.shipment_type === 'sea'" class="col-md-6">
            <label class="form-label fw-medium">
              {{ currentLang === 'ar' ? 'إجمالي CBM' : 'Total CBM' }}
            </label>
            <input
              type="number"
              class="form-control"
              name="total_cbm"
              [(ngModel)]="newShipment.total_cbm"
              min="0"
              step="0.01" />
          </div>

          <!-- Fields visible only for AIR -->
          <div *ngIf="newShipment.shipment_type === 'air'" class="col-md-6">
            <label class="form-label fw-medium">
              {{ currentLang === 'ar' ? 'إجمالي الوزن (كجم)' : 'Total Weight (kg)' }}
            </label>
            <input
              type="number"
              class="form-control"
              name="total_weight"
              [(ngModel)]="newShipment.total_weight"
              min="0"
              step="0.01" />
          </div>

          <!-- Common Field -->
          <div class="col-md-6">
            <label class="form-label fw-medium">
              {{ currentLang === 'ar' ? 'إجمالي التكلفة' : 'Total Cost' }}
            </label>
            <input
              type="number"
              class="form-control"
              name="total_cost"
              [(ngModel)]="newShipment.total_cost"
              min="0"
              step="0.01" />
          </div>

          <!-- Alert Messages -->
          <div class="col-12">
            <div *ngIf="addError" class="alert alert-danger">{{ addError }}</div>
            <div *ngIf="addSuccess" class="alert alert-success">{{ addSuccess }}</div>
          </div>

          <!-- Submit Button -->
          <div class="col-12" [ngClass]="{'text-end': currentLang !== 'ar', 'text-start': currentLang === 'ar'}">
            <button
              type="submit"
              class="btn btn-primary px-4 mt-3"
              [disabled]="adding || shipmentForm.invalid">
              <i class="bi bi-box-seam me-1"></i>
              {{ adding ? (currentLang === 'ar' ? 'جاري الإضافة...' : 'Adding...') : (currentLang === 'ar' ? 'إضافة الشحنة' : 'Add Shipment') }}
            </button>
          </div>

        </div>
      </form>
    </div>
  </div>
</div>
